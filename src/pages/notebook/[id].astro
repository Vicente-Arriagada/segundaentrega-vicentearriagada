---
// 1. Importa el JSON de notebooks
import notebooks from '../../data/notebook.json'; 
import Layout from '../../layouts/Layout.astro';

// 2. getStaticPaths usa el JSON de notebooks
export async function getStaticPaths() {
  return notebooks.map(producto => {
    return {
      params: { id: producto.id },
      props: { producto: producto }
    };
  });
}

// 3. Recibe los props del producto
const { producto } = Astro.props;

// 4. Funciones de ayuda
function formatearPrecio(precio: number) {
  return new Intl.NumberFormat('es-CL', {
    style: 'currency',
    currency: 'CLP',
    maximumFractionDigits: 0
  }).format(precio);
}
---
<Layout>
    <main class="max-w-6xl mx-auto py-10 px-4">
        
        <a href="/notebook" class="inline-block bg-white text-blue-600 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-gray-50 mb-8">
            <i class="fa-solid fa-arrow-left"></i> Volver a Notebooks
        </a>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 bg-white rounded-lg shadow-lg overflow-hidden p-8">
            
            <div class="flex justify-center items-center p-4">
                <img 
                  src={producto.imagen_url} 
                  alt={producto.nombre} 
                  class="max-w-full max-h-[400px] object-contain"
                />
            </div>

            <div>
                <h1 class="text-3xl font-bold text-gray-900 mb-2">{producto.nombre}</h1>
                <p class="text-4xl font-light text-gray-800 mb-6">{formatearPrecio(producto.precio)}</p>

                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-4">Caracter√≠sticas</h2>
                    <div class="space-y-2 text-gray-700">
                        <p><strong>Procesador:</strong> {producto.caracteristicas.procesador}</p>
                        <p><strong>RAM:</strong> {producto.caracteristicas.ram}</p>
                        <p><strong>Pantalla:</strong> {producto.caracteristicas.pantalla}</p>
                        <p><strong>Almacenamiento:</strong> {producto.caracteristicas.almacenamiento}</p>
                        <p><strong>Tarjetas de video:</strong> {producto.caracteristicas.tarjetas_de_video}</p>
                    </div>
                </div>

                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-4">Puertos</h2>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        {producto.puertos.map(puerto => (
                            <li>{puerto}</li>
                        ))}
                    </ul>
                </div>

                <div>
                    <h2 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-4">Especificaciones Secundarias</h2>
                    <div class="space-y-2 text-gray-700">
                        <p><strong>Peso:</strong> {producto.especificaciones_secundarias.peso}</p>
                        <p><strong>Dimensiones:</strong> {producto.especificaciones_secundarias.dimensiones}</p>
                        <p><strong>Sistema Operativo:</strong> {producto.especificaciones_secundarias.sistema_operativo}</p>
                        <p><strong>Otros:</strong> {producto.especificaciones_secundarias.otros}</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</Layout>